#Adds New Expense
def add_expense(expenses):

    try:
        #Asks user to enter a category, item, amount, and the date
        category = input("Enter category: ")
        item = input("Enter item name: ")
        amount = float(input("Enter amount: $"))
        date = input("Enter date (YYYY-MM-DD): ")

#Stores expense as a dictionary
        expense = {
            "category": category,
            "item": item,
            "amount": amount,
            "date": date
        }
#Adds expense to expense list
        expenses.append(expense) 
        print("Expense added successfully ‚úÖ") #Shows when user enters valid format

    except ValueError: #shows if the user does not enter a number
        print("Invalid amount. Please enter a number.")

# Displays all expenses in a clear, organized format.    
def view_expenses(expenses):
   # Checks if the list is empty
    if not expenses:
        print("No expenses recorded.")
        return

    print("\nAll Expenses:")

    #Loop 
    for i, expense in enumerate(expenses, start=1): #Gives expenses a number
        print(f"\nExpense {i}:")
        #
        for key, value in expense.items():
            if key == "amount":
                print(f"  {key.capitalize()}: ${value:.2f}")
            else:
                print(f"  {key.capitalize()}: {value}")

#Calculates and displays total expenses.
def calculate_total(expenses):
#Checks if there are expenses to calculate
    if not expenses:
        print("No expenses to calculate.")
        return

    total = 0 #Starts total at 0

    #Adds each expense amount to the total which is 0
    for expense in expenses:
        total += expense["amount"]
#Shows the total with 2 decimal places
    print(f"Total expenses: ${total:.2f}")

# Filters expenses by category.

def filter_by_category(expenses):
  #Asks a user the category they want to see
    category = input("Enter category to filter by: ")
    found = False # checks if a match is found


    for expense in expenses:
        #Checks if the user input mmatches any category 
        if expense["category"].lower() == category.lower():
            print(
                f"{expense['date']} | "
                f"{expense['category']} | "
                f"{expense['item']} | "
                f"${expense['amount']:.2f}"
            )
            found = True
#Shows in no maches are found
    if not found:
        print("No expenses found for this category.")

#   Deletes an expense by category, item, and date.
def delete_expense(expenses):
    
    if not expenses:
        print("No expenses to delete.")
        return
#Asks user to enter information abut the item or expense the would like to delete
    category = input("Enter category: ")
    item = input("Enter item name: ")
    date = input("Enter date (YYYY-MM-DD): ")
#loop through ezh expense in the list
    for expense in expenses:
        #Checks if the information the user entered matches an expense in the list
        if (
            expense["category"].lower() == category.lower()
            and expense["item"].lower() == item.lower()
            and expense["date"] == date
        ):
            #removes natching expense from the list
            expenses.remove(expense)
            print("Expense deleted successfully üóëÔ∏è")
            return # Stops the function after deleting 

    print("No matching expense found.")

#Sorts and displays expenses by date (earliest to latest).
def sort_by_date(expenses):
   
   #Checks if there are any expenses to sort
    if not expenses:
        print("No expenses to sort.")
        return
    
#Sorts expenses by date
    sorted_expenses = sorted(expenses, key=lambda expense: expense["date"])

    print("\nExpenses Sorted by Date:")
    for i, expense in enumerate(sorted_expenses, start=1):
        print(
            f"{i}. {expense['date']} | "
            f"{expense['category']} | "
            f"{expense['item']} | "
            f"${expense['amount']:.2f}"
        )

#Shows Menu
def main():

    expenses = []

    while True:
        print("\nExpense Tracker Menu")
        print("1. Add Expense")
        print("2. View All Expenses")
        print("3. Filter Expenses by Category")
        print("4. Calculate Total Expenses")
        print("5. Delete Expense")
        print("6. Sort Expenses by Date")
        print("7. Exit üö®")

        choice = input("Choose an option: ")

        if choice == "1":
            add_expense(expenses)
        elif choice == "2":
            view_expenses(expenses)
        elif choice == "3":
            filter_by_category(expenses)
        elif choice == "4":
            calculate_total(expenses)
        elif choice == "5":
            delete_expense(expenses)
        elif choice == "6":
            sort_by_date(expenses)
        elif choice == "7":
            print("Goodbye üëã")
            break
        else:
            print("Invalid option. Please try again.")


main()
